---
title: http
date: 2024-02-01
articleId: fa54c1a0-5857-4c19-8ec9-fe13694d1247
---

# http

本文只简述 `http1.0` `http1.1` 与 `http2.0` 的区别，具体细节并不讲述。

## http1.0

http1.0 的劣势：

- 无法连接复用，每次新的请求都会经历三次握手和四次挥手的过程。(解决方法：可以手动设置 `keep-alive` 达到复用的效果)。
- 队头阻塞，只有等待上一个请求完成之后，才会进行下一个请求。

## http1.1

对于 http1.0 的劣势，http1.1 做了以下的优化：

- 引入了 `pipelining` 的设计，从而被用来解决对头阻塞的问题。
- 默认开启了 `keep-alive`，以达到复用效果。

缺陷：

- 虽然引入了 `pipelining` 的设计，但是只有幂等请求的才支持 `pipelining`，并且队头阻塞的问题依旧存在 (服务器响应是逐一信息返回的，因此还是存在阻塞等待情况)。

## http2.0

- 连接共享，为了解决 http1.1 所没有解决的队头阻塞问题。现支持对每个请求设置请求优先级。
- 请求头部压缩
- 服务端推送

缺陷：

- http2.0 丢包时，整个请求会重新传数据，从而阻塞该连接中的所有请求。
- http2.0 连接会多一个 RTT 的延迟，(这个延迟是与服务端协商，是否支持 http2.0 所产生的延迟)。

## 参考资料

- <https://www.zhihu.com/question/444343281/answer/2161521918>
